define(["/static/js/bower_components/vkBeautify/vkbeautify.js"],function(){function g(){return[function(){var a=(new GenericFeature).init({label:"Apply",type:"button",name:"apply",image:"/static/images/button_save.png",imageDis:"/static/images/button_save.png"});a.exec=function(){var a=e.updateData(!0),b=d.getValue();try{b=JSON.parse(b)}catch(f){dhtmlx.alert({title:"Error",type:"error",text:"Incorrect source. Apply will prevent."})}a.levels=b.levels||[];a.levelConfig=b.levelConfig||[];e.setData(a)};
return a}(),function(){var a=(new GenericFeature).init({label:"Rollback",type:"button",name:"rollback",image:"/static/images/button_reload.png",imageDis:"/static/images/button_reload.png"});a.exec=function(){var a;e&&(a=e.updateData(!0),d.setValue(vkbeautify.json(JSON.stringify(a))))};return a}(),function(){var a=(new GenericFeature).init({label:"Format",type:"button",name:"format",image:"/static/images/format.png",imageDis:"/static/images/format.png"});a.exec=function(){var a=d.getValue();d.setValue(vkbeautify.json(a))};
return a}()]}function h(a){var c=document.createElement("DIV"),b;c.className+=" source-editor-container";a.cells("a").attachObject(c);b=ace.edit(c);b.getSession().setMode("ace/mode/json");b.setReadOnly(!1);b.$blockScrolling=Infinity;return{setValue:function(a){a=vkbeautify.json(a);b.setValue(a);b.clearSelection()},getValue:function(){return b.getValue()},resize:function(){b.resize()}}}var f,d,e;return f={init:function(a){var c=a.attachToolbar(),c=(new Toolbar).init(c);c.addFeatures.apply(c,g());d=
h(a);return f},setValue:function(a){d.setValue(a);return f},setDataSource:function(a){e=a;return f},onSizeChange:function(a){d.resize()}}});
